require=function e(t,i,n){function s(a,c){if(!i[a]){if(!t[a]){var r="function"==typeof require&&require;if(!c&&r)return r(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[a]={exports:{}};t[a][0].call(p.exports,function(e){var i=t[a][1][e];return s(i||e)},p,p.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({BGColorSpread:[function(e,t,i){"use strict";cc._RF.push(t,"629658a9MJEvY5dNlft0zwY","BGColorSpread");var n=e("MessagePipeline"),s=["#44BCFF","#4462FF","#8F44FF","#E144FF","#FF448F","#FF4444","#FF7144","#FFAD44","#FFE144","#E9FF44","#C3FF44","#78FF44","#44FF8F","#44FFE9"],o=[["#4abdac","#fc4a1a","#f78733"],["#ffce00","#0375b4","#007849"],["#e37222","#07889b","#66b9bf"],["#004445","#2c7873","#6fb98f"],["#d7c3c7","#76323f","#c09f80"],["#e24e42","#e9b000","#008f95"],["#94618e","#49274a","#f4decb"],["#4484ce","#f9cf00","#f19f4d"],["#0b3c5d","#328cc1","#d9b310"],["#286da8","#cd5360","#438496"],["#ec576b","#4ec5c1","#e5e338"],["#77c9d4","#57bc90","#015249"],["#f7882f","#f7c331","#dcc7aa"],["#6e3667","#88d317","#cf6766"],["#fedc3d","#01abaa","#fea680"],["#b56357","#b4dbc0","#a7b3a5"],["#f81b84","#f5ce28","#43c0f6"],["#4cdef5","#a4d555","#ff5992"],["#841983","#99d3df","#88bbd6"],["#fa7c92","#6ec4db","#fff7c0"],["#6bbaa7","#fba100","#6c648b"],["#66ab8c","#b6a19e","#a9b7c0"],["#cccbc6","#efd9c1","#c7d8c6"],["#945d60","#626e60","#af473c"],["#67aeca","#e52a6f","#5f0f4e"],["#4d6e9c","#99ced4","#eeb6b7"],["#ccdfcb","#ff6a5c","#056571"],["#eab126","#f24c4e","#1b7b34"],["#155765","#57652a","#ab9353"],["#d48cf8","#0e8044","#b5e582"]];cc.Class({extends:cc.Component,properties:{BGColor1:cc.Node,BGColor2:cc.Node,BGColor3:cc.Node,BGColorSpread1:cc.Node,BGColorSpread2:cc.Node,BGColorSpread3:cc.Node,anim:cc.Animation},onLoad:function(){this.colorIndex=0,n.messagePipeline.on("onLevelUp",this._onLevelUp,this),n.messagePipeline.on("onGameOver",this._onGameOver,this),n.messagePipeline.on("onReset",this._onReset,this),n.messagePipeline.on("onBeat",this._onBeat,this),n.messagePipeline.on("onBar",this._onBar,this),this.onBeatAnim=cc.sequence(cc.scaleTo(0,.6),cc.scaleTo(1,.5)),this.onBarAnim=cc.sequence(cc.scaleTo(0,.6),cc.scaleTo(4,.5))},_onReset:function(){this.BGColor1.color=cc.hexToColor(o[this.colorIndex][0]),this.BGColor2.color=cc.hexToColor(o[this.colorIndex][1]),this.BGColor3.color=cc.hexToColor(o[this.colorIndex][2]),this.anim.play("BGColorGameStart")},_onLevelUp:function(e){this.colorIndex=(this.colorIndex+1)%s.length,this.BGColorSpread1.color=cc.hexToColor(o[this.colorIndex][0]),this.BGColorSpread2.color=cc.hexToColor(o[this.colorIndex][1]),this.BGColorSpread3.color=cc.hexToColor(o[this.colorIndex][2]),this.anim.play("BGColorSpread")},_onBGColorSpread:function(){this.BGColorSpread1.setScale(0),this.BGColor1.color=cc.hexToColor(o[this.colorIndex][0]),this.BGColor2.color=cc.hexToColor(o[this.colorIndex][1]),this.BGColor3.color=cc.hexToColor(o[this.colorIndex][2])},_onGameOver:function(e){this.anim.play("BGGameOver")},_onBeat:function(){this.BGColor3.runAction(this.onBeatAnim)},_onBar:function(){this.BGColor2.runAction(this.onBarAnim)}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],BGMPlay:[function(e,t,i){"use strict";cc._RF.push(t,"2d5b2JU2+xKj48M1Tqd5Mq4","BGMPlay");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{BPM:126,beat:4,minBeat:4},onLoad:function(){this.tmpTimer=0,this.tmpTotalTimer=0,this.musicStartTime=0,this._audioScore=this.getComponent(cc.AudioSource),this.minBeatCount=0,this.nextMinBeatTime=0,this.minBeatTime=60/this.BPM/this.minBeat,this.isOnMinBeat=!1,this.inOnBeat=!1,this.isOnBar=!1,n.messagePipeline.on("onReset",this.playBGM,this),n.messagePipeline.on("onGameOver",this.stopBGM,this)},playBGM:function(){this._audioScore&&(this._audioScore.play(),this.tmpTimer=0,this.tmpTotalTimer=0,this.minBeatCount=0,this.nextMinBeatTime=0,this.isOnMinBeat=!1,this.inOnBeat=!1,this.isOnBar=!1)},stopBGM:function(){this._audioScore&&this._audioScore.stop()},update:function(e){if(this._audioScore&&this._audioScore.isPlaying){var t=this._audioScore.getCurrentTime();this.tmpTotalTimer+=e,this.tmpTotalTimer<this.musicStartTime||(this.tmpTimer+=e,t-this.tmpTotalTimer>=.05?(this.tmpTimer+=.05,this.tmpTotalTimer+=.05):t-this.tmpTotalTimer<=-.05&&(this.tmpTimer-=.05,this.tmpTotalTimer-=.05),0===this.minBeatCount||this.tmpTimer>=this.minBeatTime&&!this.isOnMinBeat?(0!==this.minBeatCount&&(this.tmpTimer-=this.minBeatTime),this.isOnMinBeat=!0,this.minBeatCount%this.minBeat==0&&(this.inOnBeat=!0),this.minBeatCount%(this.minBeat*this.beat)==0&&(this.isOnBar=!0),this.minBeatCount+=1):(this.isOnMinBeat=!1,this.inOnBeat=!1,this.isOnBar=!1),this.isOnMinBeat&&n.messagePipeline.sendMessage("onMinBeat",this.minBeatCount),this.inOnBeat&&n.messagePipeline.sendMessage("onBeat",this),this.isOnBar&&n.messagePipeline.sendMessage("onBar",this))}}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],ButtonReset:[function(e,t,i){"use strict";cc._RF.push(t,"b73c3qC6rBMnL+iZ19AXBAh","ButtonReset");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{anim:cc.Animation},onLoad:function(){n.messagePipeline.on("onGameOver",this._onGameOver,this)},_onGameOver:function(){this.anim.play("ButtonOpen")},$reset:function(){this.anim.play("ButtonClose"),n.messagePipeline.sendMessage("onReset",this)}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],EBBase:[function(e,t,i){"use strict";cc._RF.push(t,"ac93d2uW0BN6bSUIdYo3T+U","EBBase"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.node.setScale(1),this.node.color=cc.hexToColor("#1E1E1E"),this.node.width=e.size,this.node.height=e.size,this.node.x=e.x,this.node.y=e.y,this.speed=e.speed,this.isWhite=!1,this.isEaten=!1},ebUpdate:function(e){}}),cc._RF.pop()},{}],EBClockRotate:[function(e,t,i){"use strict";cc._RF.push(t,"86839UgGrlLhqhQpbnCqDEN","EBClockRotate");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./EBBase"));cc.Class({extends:n.default,properties:{},onLoad:function(){this._super()},init:function(e){this._super(e),this.isRotate=!1,this.rotateSpeed=e.rotateSpeed,this.rotateTime=e.rotateTime,this.straightTime=e.straightTime,this.timer=0},ebUpdate:function(e){this._super(e),this.timer+=e,this.isRotate&&this.timer>=this.rotateTime?(this.timer-=this.rotateTime,this.isRotate=!1):!this.isRotate&&this.timer>=this.straightTime&&(this.timer-=this.straightTime,this.isRotate=!0);var t=this.node.getPosition(),i=cc.Vec2.ZERO,n=cc.pDistance(i,t),s=cc.pToAngle(cc.pSub(t,i)),o=cc.radiansToDegrees(s);this.isRotate?(this.rotateSpeed>0?this.rotateSpeed+=10*e:this.rotateSpeed-=10*e,o+=e*this.rotateSpeed):n-=e*this.speed;var a=cc.degreesToRadians(o);this.node.y=Math.sin(a)*n,this.node.x=Math.cos(a)*n}}),cc._RF.pop()},{"./EBBase":"EBBase"}],EBRotate:[function(e,t,i){"use strict";cc._RF.push(t,"8243dkkcBZPboaIFQ+VNmEX","EBRotate");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./EBBase"));cc.Class({extends:n.default,properties:{},onLoad:function(){this._super()},init:function(e){this._super(e),this.rotateSpeed=e.rotateSpeed,this.accelerate=e.accelerate},ebUpdate:function(e){this._super(e),this.rotateSpeed>0?this.rotateSpeed+=e*this.accelerate:this.rotateSpeed-=e*this.accelerate;var t=this.node.getPosition(),i=cc.Vec2.ZERO,n=cc.pDistance(i,t);n-=e*this.speed;var s=cc.pToAngle(cc.pSub(t,i)),o=cc.radiansToDegrees(s);o+=e*this.rotateSpeed;var a=cc.degreesToRadians(o);this.node.y=Math.sin(a)*n,this.node.x=Math.cos(a)*n}}),cc._RF.pop()},{"./EBBase":"EBBase"}],EBStraight:[function(e,t,i){"use strict";cc._RF.push(t,"f1ec35MVS9PJYpaeGuGZgi0","EBStraight");var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./EBBase"));cc.Class({extends:n.default,properties:{},onLoad:function(){this._super()},init:function(e){this._super(e)},ebUpdate:function(e){this._super(e);var t=this.node.getPosition(),i=cc.Vec2.ZERO,n=(cc.pDistance(i,t),cc.pToAngle(cc.pSub(i,t))),s=-cc.radiansToDegrees(n)*Math.PI/180;this.node.y-=Math.sin(s)*e*this.speed,this.node.x+=Math.cos(s)*e*this.speed}}),cc._RF.pop()},{"./EBBase":"EBBase"}],ESArc:[function(e,t,i){"use strict";cc._RF.push(t,"730d2Y2SPFEVLNJg0SJhBF3","ESArc"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],ESMass:[function(e,t,i){"use strict";cc._RF.push(t,"08c08nqXRNFjYLPFRFdaxKl","ESMass"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},spawnData:function(e,t){var i=[],n=360*Math.random(),s=cc.degreesToRadians(n),o=new cc.Vec2(480*Math.cos(s),480*Math.sin(s)),a=Object.assign({},t);a.speed=100,a.ebType=e,a.size=32,a.x=o.x,a.y=o.y,i.push(a);for(var c=0;c<6;c++){var r=3;c%3==0&&(r=7),2<=c&&c<=4&&(r*=-1);var h=cc.degreesToRadians(n+60*c),p=Object.assign({},t);p.speed=100+r,p.ebType=e,p.size=32,p.x=o.x+32*Math.cos(h)*2,p.y=o.y+32*Math.sin(h)*2,i.push(p)}return i}}),cc._RF.pop()},{}],ESRandom:[function(e,t,i){"use strict";cc._RF.push(t,"e6c77nVrK9Jco9iJsLOVW+O","ESRandom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],ESRound:[function(e,t,i){"use strict";cc._RF.push(t,"ef857WDEoRAKqdOe6md13Yf","ESRound"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},spawnData:function(e,t,i){for(var n=[],s=360/e,o=0;o<e;o++){var a=cc.degreesToRadians(s*o),c=Object.assign({},i);c.speed=75,c.ebType=t,c.size=32,c.x=480*Math.cos(a),c.y=480*Math.sin(a),n.push(c)}return n}}),cc._RF.pop()},{}],ESStraight:[function(e,t,i){"use strict";cc._RF.push(t,"e6837rWO5ZKzqFtK8ClwkKj","ESStraight"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},spawnData:function(e,t){for(var i=[],n=360*Math.random(),s=(cc.degreesToRadians(360*Math.random()),0),o=480,a=0;a<e;a++){var c=cc.degreesToRadians(n+s),r={speed:100,ebType:"ebStraight",size:32,x:Math.cos(c)*o,y:Math.sin(c)*o};i.push(r),o+=32,s+=t}return i}}),cc._RF.pop()},{}],ESVshaped:[function(e,t,i){"use strict";cc._RF.push(t,"4219aSBa+FOGp2DMkuT3IjG","ESVshaped"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},spawnData:function(e){for(var t=[],i=360*Math.random(),n=480,s=0;s<e;s++){var o=0;s>0&&s%2==1?o=5*Math.ceil(s/2):s>0&&s%2==0&&(o=-5*Math.ceil(s/2)),s%2==1&&(n+=32);var a=cc.degreesToRadians(i+o),c={speed:100,ebType:"ebStraight",size:32,x:Math.cos(a)*n,y:Math.sin(a)*n};t.push(c)}return t}}),cc._RF.pop()},{}],Enemies:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"73be7hB1XFO77yzlxOwfAUY","Enemies");var s=e("MessagePipeline"),o=n(e("../EnemySpawn/ESStraight")),a=n(e("../EnemySpawn/ESVshaped")),c=n(e("../EnemySpawn/ESRound")),r=n(e("../EnemySpawn/ESMass"));cc.Class({extends:cc.Component,properties:{esStraight:o.default,esVshaped:a.default,esRound:c.default,esMass:r.default,mochiNode:cc.Node,enemyPrefab:cc.Prefab,initialPool:50,addPool:10},onLoad:function(){s.messagePipeline.on("onLevelUp",this._onLevelUp,this),s.messagePipeline.on("onReset",this._onReset,this),this.mochi=this.mochiNode.getComponent("Mochi"),this.isGameStart=!1,this.gameTimer=0,this.enemySpawnTimer=0,this.enemySpawnInterval=2,this.enemySpeedBase=100,this.testSpawnTime=0,this._enemyPool=new cc.NodePool("Enemy"),this.extendEnemyPool(this.initialPool)},_onReset:function(){this.isGameStart=!0,this.gameTimer=0,this.enemySpawnTimer=0,this.enemySpawnInterval=2,this.enemySpeedBase=100,this.testSpawnTime=0,this.node.children.forEach(function(e){var t=e.getComponent("Enemy");t&&t.deleteEnemy()},this)},extendEnemyPool:function(e){for(var t=0;t<e;t++){var i=cc.instantiate(this.enemyPrefab);i.on("onEnemyDelete",this.onEnemyDelete,this),i.on("onEaten",this.onEaten,this),i.on("onHit",this.onHit,this),i.getComponent("Enemy").mochiNode=this.mochiNode,this._enemyPool.put(i)}},onEnemyDelete:function(e){var t=e.detail;this._enemyPool.put(t)},_onLevelUp:function(e){e.getUserData();this.enemySpawnInterval=Math.max(this.enemySpawnInterval-.05,.5)},update:function(e){if(this.isGameStart&&(this.gameTimer+=e,this.enemySpawnTimer+=e,this.enemySpawnTimer>=this.enemySpawnInterval)){this.enemySpawnTimer-=this.enemySpawnInterval;var t=[];this.testSpawnTime%7==0?t=this.esRound.spawnData(12,"ebStraight",{}):this.testSpawnTime%7==1?t=this.esRound.spawnData(12,"ebRotate",{rotateSpeed:60,accelerate:2}):this.testSpawnTime%7==2?t=this.esRound.spawnData(12,"ebClockRotate",{rotateSpeed:-40,accelerate:2,rotateTime:.3,straightTime:.3}):this.testSpawnTime%7==3?t=this.esVshaped.spawnData(7):this.testSpawnTime%7==4?t=this.esStraight.spawnData(15,0):this.testSpawnTime%7==5?t=this.esStraight.spawnData(7,-8):this.testSpawnTime%7==6&&(t=this.esStraight.spawnData(7,8));this.spawner(t),this.testSpawnTime+=1}},spawner:function(e){e.forEach(function(e){0===this._enemyPool.size()&&this.extendEnemyPool(this.addPool),this._enemyPool.get(e).parent=this.node},this)},onEaten:function(e){this.mochi.eat(e.detail.node.width)},onHit:function(e){this.mochi.blacken()}}),cc._RF.pop()},{"../EnemySpawn/ESMass":"ESMass","../EnemySpawn/ESRound":"ESRound","../EnemySpawn/ESStraight":"ESStraight","../EnemySpawn/ESVshaped":"ESVshaped",MessagePipeline:"MessagePipeline"}],Enemy:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"4ec38MxISFKp65c6ihgW6+Z","Enemy");var s=e("MessagePipeline"),o=n(e("../EnemyBehaviors/EBStraight")),a=n(e("../EnemyBehaviors/EBRotate")),c=n(e("../EnemyBehaviors/EBClockRotate"));cc.Class({extends:cc.Component,properties:{ebStraight:o.default,ebRotate:a.default,ebClockRotate:c.default},onLoad:function(){this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.animFinished,this)},reuse:function(e){this.ebType=e.ebType,"ebStraight"===this.ebType?this.ebStraight.init(e):"ebRotate"===this.ebType?this.ebRotate.init(e):"ebClockRotate"===this.ebType&&this.ebClockRotate.init(e),this.isWhite=!1,this.animName="",this.speed=e.speed,this.node.color=cc.hexToColor("#1E1E1E"),this.node.setScale(1),this.isEaten=!1},update:function(e){"ebStraight"===this.ebType?this.ebStraight.ebUpdate(e):"ebRotate"===this.ebType?this.ebRotate.ebUpdate(e):"ebClockRotate"===this.ebType&&this.ebClockRotate.ebUpdate(e)},onCollisionEnter:function(e,t){this.isEaten||this.isWhite||"cursor"!==e.node.group||(this.isWhite=!0,this.anim.play("EnemyWhiten"),s.messagePipeline.sendMessage("SOUND_PLAY","white")),"player"===e.node.group&&(this.isEaten=!0,this.isWhite?this.node.emit("onEaten",this):this.node.emit("onHit",this),this.speed=500,this.anim.play("EnemyDisappear")),"bgColor"===e.node.group&&(this.isEaten=!0,this.anim.play("EnemyDisappear"))},animFinished:function(e){"EnemyDisappear"===e.target.clip.name&&this.node.emit("onEnemyDelete",this.node)},deleteEnemy:function(){this.node.getNumberOfRunningActions()>0&&this.node.stopAllActions(),this.node.emit("onEnemyDelete",this.node)}}),cc._RF.pop()},{"../EnemyBehaviors/EBClockRotate":"EBClockRotate","../EnemyBehaviors/EBRotate":"EBRotate","../EnemyBehaviors/EBStraight":"EBStraight",MessagePipeline:"MessagePipeline"}],LabelBlack:[function(e,t,i){"use strict";cc._RF.push(t,"328e0rvoQpBuL4B0sLbwMgx","LabelBlack");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{label:cc.Label},onLoad:function(){n.messagePipeline.on("onBlacken",this._onBlacken,this),n.messagePipeline.on("onReset",this._onReset,this)},_onBlacken:function(e){var t=e.detail;this.label.string="BLACK:"+t},_onReset:function(){this.label.string="BLACK:0"}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],LabelGameOver:[function(e,t,i){"use strict";cc._RF.push(t,"fcf71ux0GFGR5o/puTbpprp","LabelGameOver");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{anim:cc.Animation},onLoad:function(){n.messagePipeline.on("onGameOver",this._onGameOver,this),n.messagePipeline.on("onReset",this._onReset,this)},_onGameOver:function(){this.anim.play()},_onReset:function(){this.node.opacity=0}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],LabelLevelUp:[function(e,t,i){"use strict";cc._RF.push(t,"63475iTQxZHlYIU+NeSeOpZ","LabelLevelUp");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{anim:cc.Animation},onLoad:function(){n.messagePipeline.on("onLevelUp",this._onLevelUp,this)},_onLevelUp:function(){this.anim.play()}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],LabelLevel:[function(e,t,i){"use strict";cc._RF.push(t,"0543bpKU/FDkYRaQH8GrI77","LabelLevel");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{label:cc.Label},onLoad:function(){n.messagePipeline.on("onLevelUp",this._onLevelUp,this),n.messagePipeline.on("onReset",this._onReset,this)},_onLevelUp:function(e){var t=e.detail;this.label.string="LEVEL:"+t},_onReset:function(){this.label.string="LEVEL:1"}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],LabelTitle:[function(e,t,i){"use strict";cc._RF.push(t,"dcd6beCqR9C66N0OrU0+XeB","LabelTitle");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.messagePipeline.on("onReset",this._onReset,this)},_onReset:function(){this.node.setScale(0)}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],MessagePipeline:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"cf771H+nwxPKaA6R6epNabN","MessagePipeline"),Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,cc.EventTarget),a(t,[{key:"sendMessage",value:function(e,t){cc.log("dispatch system notification "+e),this.emit(e,t)}}]),t}();i.messagePipeline=new c;cc._RF.pop()},{}],Mochi:[function(e,t,i){"use strict";cc._RF.push(t,"c8b96VRd6FDm5LsyllTzY43","Mochi");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{nextLevel:10},onLoad:function(){this.currentSize=1,this.currentLevel=1,this.black=0,n.messagePipeline.on("onReset",this._onReset,this)},update:function(e){},_onReset:function(){this.currentSize=1,this.currentLevel=1,this.black=0;var e=this.scaling(),t=this.coloring();this.node.runAction(cc.spawn(e,t))},eat:function(e){if(this.currentSize+=e/100,this.currentSize>=this.nextLevel){this.currentSize=1,this.currentLevel+=1,this.black=Math.floor(this.black/2),n.messagePipeline.sendMessage("onBlacken",this.black);var t=this.scaling(),i=this.coloring();this.node.runAction(cc.spawn(t,i)),n.messagePipeline.sendMessage("onLevelUp",this.currentLevel),n.messagePipeline.sendMessage("SOUND_PLAY","levelup")}else{var s=cc.scaleTo(.1,this.currentSize);this.node.runAction(s)}n.messagePipeline.sendMessage("SOUND_PLAY","eat")},blacken:function(){if(this.black<100){this.black=Math.min(100,this.black+this.currentLevel),n.messagePipeline.sendMessage("onBlacken",this.black),this.black>=100&&n.messagePipeline.sendMessage("onGameOver",this.currentLevel);var e=this.coloring();this.node.runAction(e)}},scaling:function(){return cc.scaleTo(.1,this.currentSize)},coloring:function(){var e=2.25*this.black;return cc.tintTo(.1,255-e,255-e,255-e)}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],PhysicsEnabler:[function(e,t,i){"use strict";cc._RF.push(t,"0d7cb/KZYRMqLIrJQbkcpKx","PhysicsEnabler"),cc.Class({extends:cc.Component,properties:{enabledDebugDraw:!0,enabledDrawBoundingBox:!0},onLoad:function(){cc.director.getPhysicsManager().enabled=!0;var e=cc.director.getCollisionManager();e.enabled=this.enabled,e.enabledDebugDraw=this.enabledDebugDraw,e.enabledDrawBoundingBox=this.enabledDrawBoundingBox}}),cc._RF.pop()},{}],SEPlay:[function(e,t,i){"use strict";cc._RF.push(t,"132b92D0ChFHpuNjkDle2qU","SEPlay");var n=e("MessagePipeline");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.audioSources=this.node.getComponents(cc.AudioSource),this.clipNames=[];for(var e=0;e<this.audioSources.length;e++){var t=this.audioSources[e].clip;this.clipNames.push(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")))}},start:function(){this._soundNameStack=[],n.messagePipeline.on("SOUND_PLAY",this._soundStack,this),n.messagePipeline.on("onMinBeat",this._onMinBeat,this)},onDestroy:function(){n.messagePipeline.off("SOUND_PLAY",this._soundStack,this)},_soundStack:function(e){var t=e.getUserData(),i=this.clipNames.indexOf(t);i<0||this._soundNameStack.indexOf(i)<0&&this._soundNameStack.push(i)},_onMinBeat:function(e){e.getUserData();this._soundNameStack.forEach(function(e){this.audioSources[e].isPlaying&&this.audioSources[e].stop(),this.audioSources[e].play()},this),this._soundNameStack=[]}}),cc._RF.pop()},{MessagePipeline:"MessagePipeline"}],Target:[function(e,t,i){"use strict";cc._RF.push(t,"e5c31IPYTNH+acPw1I+Bacb","Target"),cc.Class({extends:cc.Component,properties:{line:cc.Graphics,mochiNode:cc.Node},onLoad:function(){this.isDisp=!1},update:function(e){},onCollisionEnter:function(e,t){}}),cc._RF.pop()},{}],TouchInput:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"ebbbaGZgelHMo+XOSruDJ7R","TouchInput");var s=n(e("../Mochi")),o=n(e("../Weapon/Target"));cc.Class({extends:cc.Component,properties:{mochi:s.default,target:o.default,cursor:cc.Node},_onTouchBegan:function(e){var t=e.getLocation();this._mochiMove(t),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this._touched=!0,this.target.isDisp=!0},_finishTouch:function(e){if(this._touched){this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this._touched=!1;e.getLocation();this.cursor.position=new cc.Vec2(1e3,1e3),this.target.isDisp=!1}},_onTouchEnded:function(e){this._finishTouch(e)},_onTouchCancel:function(e){this._finishTouch(e)},_onTouchMove:function(e){var t=e.getLocation();this._mochiMove(t)},onLoad:function(){this._touched=!1,this._registerEvent()},onDestroy:function(){this._unregisterEvent()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_mochiMove:function(e){var t=this.node.parent.convertToNodeSpaceAR(e);this.cursor.position=t}}),cc._RF.pop()},{"../Mochi":"Mochi","../Weapon/Target":"Target"}]},{},["BGColorSpread","Enemies","Enemy","EBBase","EBClockRotate","EBRotate","EBStraight","ESArc","ESMass","ESRandom","ESRound","ESStraight","ESVshaped","Mochi","ButtonReset","LabelBlack","LabelGameOver","LabelLevel","LabelLevelUp","LabelTitle","Target","BGMPlay","MessagePipeline","PhysicsEnabler","SEPlay","TouchInput"]);